/**
 * ç»„ç±»åž‹é€‰æ‹©å¼¹çª—ç»„ä»¶
 * æ”¯æŒé€‰æ‹©çƒ­èº«ã€æ­£å¼ã€æ”¾æ¾ä¸‰ç§ç»„ç±»åž‹
 */

import { SetTypeConst } from '@tbs/common';

@Component
export struct SetTypeSelectDialog {
  @Prop currentSetType: string = SetTypeConst.WORKING
  onSelect: (setType: string) => void = (): void => {}
  onCancel: () => void = (): void => {}

  build() {
    Column() {
      Column({ space: 0 }) {
        Text('é€‰æ‹©ç»„ç±»åž‹')
          .fontSize(17)
          .fontWeight(FontWeight.Bold)
          .fontColor($r('app.color.text_primary'))
          .width('100%')
          .textAlign(TextAlign.Center)
          .padding({ top: 20, bottom: 16 })

        Column({ space: 0 }) {
          // çƒ­èº«é€‰é¡¹
          this.SetTypeOption('çƒ­èº«', 'ðŸ”¥', SetTypeConst.WARMUP, $r('app.color.set_warmup'), 'ä½Žå¼ºåº¦ï¼Œå‡†å¤‡è‚Œè‚‰')

          Divider().color($r('app.color.divider')).margin({ left: 20, right: 20 })

          // æ­£å¼é€‰é¡¹
          this.SetTypeOption('æ­£å¼', 'ðŸ’ª', SetTypeConst.WORKING, $r('app.color.set_working'), 'ä¸»è¦è®­ç»ƒç»„')

          Divider().color($r('app.color.divider')).margin({ left: 20, right: 20 })

          // æ”¾æ¾é€‰é¡¹
          this.SetTypeOption('æ”¾æ¾', 'ðŸ§˜', SetTypeConst.COOLDOWN, $r('app.color.set_cooldown'), 'ä½Žå¼ºåº¦ï¼Œæ¢å¤è‚Œè‚‰')
        }
        .width('100%')

        // å–æ¶ˆæŒ‰é’®
        Button('å–æ¶ˆ')
          .width('100%')
          .height(50)
          .fontSize(16)
          .fontColor($r('app.color.text_secondary'))
          .backgroundColor($r('app.color.card_background_secondary'))
          .borderRadius({ topLeft: 0, topRight: 0, bottomLeft: 16, bottomRight: 16 })
          .margin({ top: 8 })
          .onClick((): void => {
            this.onCancel();
          })
      }
      .width('85%')
      .backgroundColor($r('app.color.card_background'))
      .borderRadius(16)
    }
    .width('100%')
    .height('100%')
    .backgroundColor($r('app.color.overlay_background'))
    .justifyContent(FlexAlign.Center)
    .onClick((): void => {
      this.onCancel();
    })
  }

  @Builder
  SetTypeOption(title: string, icon: string, setType: string, checkColor: Resource, description: string): void {
    Row() {
      Row({ space: 12 }) {
        Text(icon)
          .fontSize(20)

        Column({ space: 2 }) {
          Text(title)
            .fontSize(15)
            .fontWeight(FontWeight.Medium)
            .fontColor($r('app.color.text_primary'))

          Text(description)
            .fontSize(12)
            .fontColor($r('app.color.text_hint'))
        }
        .alignItems(HorizontalAlign.Start)
      }

      if (this.currentSetType === setType) {
        Text('âœ“')
          .fontSize(18)
          .fontColor(checkColor)
          .fontWeight(FontWeight.Bold)
      }
    }
    .width('100%')
    .height(60)
    .padding({ left: 20, right: 20 })
    .justifyContent(FlexAlign.SpaceBetween)
    .backgroundColor($r('app.color.card_background'))
    .onClick((): void => {
      this.onSelect(setType);
    })
  }
}
